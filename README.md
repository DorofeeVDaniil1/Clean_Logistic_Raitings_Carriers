# Микросервис для анализа времени работы водителя

## Вводное
Для каждой контрольной точки (КП) в производственной зоне (ПЗ) прогнозируется время прибытия, а для ПЗ в целом - рабочее время. Это время добавляется в прогноз для транспортного средства (ТС), а в мониторинге отмечаются желтым КП и ТС, где есть отставание от графика.

## Задача 1 (если ПЗ новое)
При составлении нового ПЗ:
- Рассчитать его продолжительность, предполагаемое время завершения работы водителем и пройденное расстояние.
- Добавить в маршрут информацию о:
  - Рабочем времени
  - Пробеге

Кажется, что минимальное неделимое действие здесь - это "узнать время поездки до следующей КП". На его основе можно выстроить всю задачу.

### План разработки

1. Узнать время поездки от **КП-0** до **КП-1** в формате **ЧЧ:ММ** в городе **X**.
   - КП-0 и КП-1 описывают координаты контрольных точек и расстояние между ними (по прямой или по дорогам).
   - Нужно учитывать, что ПЗ включает не только КП, но также поездки на полигон и с полигона, в гараж и из гаража.

2. Заменим термин **КП** на **МЕСТО**:
   - Путь от **МЕСТО-0** до **МЕСТО-1** в формате **ЧЧ:ММ** в городе **X**.

3. **ЧЧ:ММ** - это расчетное время с учетом пробок, которые можно описывать коэффициентом:
   - Например, в 6:00 умножаем на 0.8, а в 17:00 - на 1.7.

4. **X** - это характеристика транспортной инфраструктуры города:
   - Например, в Иркутске (ИРК) путь от **МЕСТА-0** до **МЕСТА-1** может идти только через одну дорогу, что вызывает пробки, тогда как в Санкт-Петербурге (СПБ) можно выбрать различные пути объезда.

## Расчет теоретического времени на выполнение ПЗ
- Зная время начала смены, время от **МЕСТА-N** до **МЕСТА-N+1**, а также время на опустошение баков в КП, можно полностью рассчитать общее время, необходимое для выполнения ПЗ.

## Фиксация реального времени на выполнение ПЗ
- С реальным временем все проще: ориентируемся на данные по времени вывоза, загрузки и разгрузки, поступающие из отчетов водителя.

## Отчетность о расхождениях между плановым и фактическим временем на ПЗ
- Визуализация: точки в ПЗ окрашиваются в зависимости от отклонений.
- Формирование сводного отчета по выполнению ПЗ.
